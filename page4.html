<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>多功能本地播放器</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h2 { margin-top: 30px; }
    .section { margin-bottom: 40px; }
    button { margin-top: 10px; }
    img, video { max-width: 100%; margin-top: 10px; }
    pre { background: #f0f0f0; padding: 10px; white-space: pre-wrap; word-wrap: break-word; }
  </style>
</head>
<body>
  <h1>本地文件播放器</h1>

  <!-- 音乐 -->
  <div class="section">
    <h2>音乐播放器</h2>
    <input type="file" accept="audio/*" onchange="playAudio(event)">
    <br><br>
    <audio id="audioPlayer" controls></audio>
  </div>

  <!-- 图片 -->
  <div class="section">
    <h2>图片查看器</h2>
    <input type="file" accept="image/*" onchange="showImage(event)">
    <br><br>
    <img id="imageViewer" alt="预览图片">
  </div>

  <!-- 视频 -->
  <div class="section">
    <h2>视频播放器</h2>
    <input type="file" accept="video/*" onchange="playVideo(event)">
    <br><br>
    <video id="videoPlayer" controls></video>
  </div>

  <!-- 文档 -->
  <div class="section">
    <h2>文档查看器 (txt/pdf/doc)</h2>
    <input type="file" accept=".txt,.pdf,.doc,.docx" onchange="showDoc(event)">
    <br><br>
    <iframe id="docViewer" style="width:100%;height:400px;display:none;"></iframe>
    <pre id="textViewer" style="display:none;"></pre>
  </div>

  <script>
    function playAudio(event) {
      const file = event.target.files[0];
      if (file) {
        const url = URL.createObjectURL(file);
        document.getElementById('audioPlayer').src = url;
      }
    }

    function showImage(event) {
      const file = event.target.files[0];
      if (file) {
        const url = URL.createObjectURL(file);
        document.getElementById('imageViewer').src = url;
      }
    }

    function playVideo(event) {
      const file = event.target.files[0];
      if (file) {
        const url = URL.createObjectURL(file);
        const player = document.getElementById('videoPlayer');
        player.src = url;
        player.style.width = "100%";
      }
    }

    function showDoc(event) {
      const file = event.target.files[0];
      const docViewer = document.getElementById('docViewer');
      const textViewer = document.getElementById('textViewer');
      if (!file) return;

      const url = URL.createObjectURL(file);
      if (file.type === "text/plain") {
        const reader = new FileReader();
        reader.onload = function(e) {
          textViewer.style.display = "block";
          docViewer.style.display = "none";
          textViewer.textContent = e.target.result;
        };
        reader.readAsText(file);
      } else {
        textViewer.style.display = "none";
        docViewer.style.display = "block";
        docViewer.src = url;
      }
    }
  </script>
</body>
</html>